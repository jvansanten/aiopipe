













































<!doctype html>
<html>
<head>
    <!-- Documentation generated by pdoc3k -->

    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1" />

    <title>aiopipe API documentation</title>
    <meta name="description" content="This package wraps the [`os.pipe`](https://docs.python.org/3/library/os.html#os.pipe)" />

    <style type="text/css">
        /*! normalize.css v7.0.0 | MIT License | github.com/necolas/normalize.css */

/* Document
   ========================================================================== */

/**
 * 1. Correct the line height in all browsers.
 * 2. Prevent adjustments of font size after orientation changes in
 *    IE on Windows Phone and in iOS.
 */

html {
  line-height: 1.15; /* 1 */
  -ms-text-size-adjust: 100%; /* 2 */
  -webkit-text-size-adjust: 100%; /* 2 */
}

/* Sections
   ========================================================================== */

/**
 * Remove the margin in all browsers (opinionated).
 */

body {
  margin: 0;
}

/**
 * Add the correct display in IE 9-.
 */

article,
aside,
footer,
header,
nav,
section {
  display: block;
}

/**
 * Correct the font size and margin on `h1` elements within `section` and
 * `article` contexts in Chrome, Firefox, and Safari.
 */

h1 {
  font-size: 2em;
  margin: 0.67em 0;
}

/* Grouping content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 * 1. Add the correct display in IE.
 */

figcaption,
figure,
main { /* 1 */
  display: block;
}

/**
 * Add the correct margin in IE 8.
 */

figure {
  margin: 1em 40px;
}

/**
 * 1. Add the correct box sizing in Firefox.
 * 2. Show the overflow in Edge and IE.
 */

hr {
  box-sizing: content-box; /* 1 */
  height: 0; /* 1 */
  overflow: visible; /* 2 */
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

pre {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/* Text-level semantics
   ========================================================================== */

/**
 * 1. Remove the gray background on active links in IE 10.
 * 2. Remove gaps in links underline in iOS 8+ and Safari 8+.
 */

a {
  background-color: transparent; /* 1 */
  -webkit-text-decoration-skip: objects; /* 2 */
}

/**
 * 1. Remove the bottom border in Chrome 57- and Firefox 39-.
 * 2. Add the correct text decoration in Chrome, Edge, IE, Opera, and Safari.
 */

abbr[title] {
  border-bottom: none; /* 1 */
  text-decoration: underline; /* 2 */
  text-decoration: underline dotted; /* 2 */
}

/**
 * Prevent the duplicate application of `bolder` by the next rule in Safari 6.
 */

b,
strong {
  font-weight: inherit;
}

/**
 * Add the correct font weight in Chrome, Edge, and Safari.
 */

b,
strong {
  font-weight: bolder;
}

/**
 * 1. Correct the inheritance and scaling of font size in all browsers.
 * 2. Correct the odd `em` font sizing in all browsers.
 */

code,
kbd,
samp {
  font-family: monospace, monospace; /* 1 */
  font-size: 1em; /* 2 */
}

/**
 * Add the correct font style in Android 4.3-.
 */

dfn {
  font-style: italic;
}

/**
 * Add the correct background and color in IE 9-.
 */

mark {
  background-color: #ff0;
  color: #000;
}

/**
 * Add the correct font size in all browsers.
 */

small {
  font-size: 80%;
}

/**
 * Prevent `sub` and `sup` elements from affecting the line height in
 * all browsers.
 */

sub,
sup {
  font-size: 75%;
  line-height: 0;
  position: relative;
  vertical-align: baseline;
}

sub {
  bottom: -0.25em;
}

sup {
  top: -0.5em;
}

/* Embedded content
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

audio,
video {
  display: inline-block;
}

/**
 * Add the correct display in iOS 4-7.
 */

audio:not([controls]) {
  display: none;
  height: 0;
}

/**
 * Remove the border on images inside links in IE 10-.
 */

img {
  border-style: none;
}

/**
 * Hide the overflow in IE.
 */

svg:not(:root) {
  overflow: hidden;
}

/* Forms
   ========================================================================== */

/**
 * 1. Change the font styles in all browsers (opinionated).
 * 2. Remove the margin in Firefox and Safari.
 */

button,
input,
optgroup,
select,
textarea {
  font-family: sans-serif; /* 1 */
  font-size: 100%; /* 1 */
  line-height: 1.15; /* 1 */
  margin: 0; /* 2 */
}

/**
 * Show the overflow in IE.
 * 1. Show the overflow in Edge.
 */

button,
input { /* 1 */
  overflow: visible;
}

/**
 * Remove the inheritance of text transform in Edge, Firefox, and IE.
 * 1. Remove the inheritance of text transform in Firefox.
 */

button,
select { /* 1 */
  text-transform: none;
}

/**
 * 1. Prevent a WebKit bug where (2) destroys native `audio` and `video`
 *    controls in Android 4.
 * 2. Correct the inability to style clickable types in iOS and Safari.
 */

button,
html [type="button"], /* 1 */
[type="reset"],
[type="submit"] {
  -webkit-appearance: button; /* 2 */
}

/**
 * Remove the inner border and padding in Firefox.
 */

button::-moz-focus-inner,
[type="button"]::-moz-focus-inner,
[type="reset"]::-moz-focus-inner,
[type="submit"]::-moz-focus-inner {
  border-style: none;
  padding: 0;
}

/**
 * Restore the focus styles unset by the previous rule.
 */

button:-moz-focusring,
[type="button"]:-moz-focusring,
[type="reset"]:-moz-focusring,
[type="submit"]:-moz-focusring {
  outline: 1px dotted ButtonText;
}

/**
 * Correct the padding in Firefox.
 */

fieldset {
  padding: 0.35em 0.75em 0.625em;
}

/**
 * 1. Correct the text wrapping in Edge and IE.
 * 2. Correct the color inheritance from `fieldset` elements in IE.
 * 3. Remove the padding so developers are not caught out when they zero out
 *    `fieldset` elements in all browsers.
 */

legend {
  box-sizing: border-box; /* 1 */
  color: inherit; /* 2 */
  display: table; /* 1 */
  max-width: 100%; /* 1 */
  padding: 0; /* 3 */
  white-space: normal; /* 1 */
}

/**
 * 1. Add the correct display in IE 9-.
 * 2. Add the correct vertical alignment in Chrome, Firefox, and Opera.
 */

progress {
  display: inline-block; /* 1 */
  vertical-align: baseline; /* 2 */
}

/**
 * Remove the default vertical scrollbar in IE.
 */

textarea {
  overflow: auto;
}

/**
 * 1. Add the correct box sizing in IE 10-.
 * 2. Remove the padding in IE 10-.
 */

[type="checkbox"],
[type="radio"] {
  box-sizing: border-box; /* 1 */
  padding: 0; /* 2 */
}

/**
 * Correct the cursor style of increment and decrement buttons in Chrome.
 */

[type="number"]::-webkit-inner-spin-button,
[type="number"]::-webkit-outer-spin-button {
  height: auto;
}

/**
 * 1. Correct the odd appearance in Chrome and Safari.
 * 2. Correct the outline style in Safari.
 */

[type="search"] {
  -webkit-appearance: textfield; /* 1 */
  outline-offset: -2px; /* 2 */
}

/**
 * Remove the inner padding and cancel buttons in Chrome and Safari on macOS.
 */

[type="search"]::-webkit-search-cancel-button,
[type="search"]::-webkit-search-decoration {
  -webkit-appearance: none;
}

/**
 * 1. Correct the inability to style clickable types in iOS and Safari.
 * 2. Change font properties to `inherit` in Safari.
 */

::-webkit-file-upload-button {
  -webkit-appearance: button; /* 1 */
  font: inherit; /* 2 */
}

/* Interactive
   ========================================================================== */

/*
 * Add the correct display in IE 9-.
 * 1. Add the correct display in Edge, IE, and Firefox.
 */

details, /* 1 */
menu {
  display: block;
}

/*
 * Add the correct display in all browsers.
 */

summary {
  display: list-item;
}

/* Scripting
   ========================================================================== */

/**
 * Add the correct display in IE 9-.
 */

canvas {
  display: inline-block;
}

/**
 * Add the correct display in IE.
 */

template {
  display: none;
}

/* Hidden
   ========================================================================== */

/**
 * Add the correct display in IE 10-.
 */

[hidden] {
  display: none;
}

    </style>


    <style type="text/css">
        * {
    box-sizing: border-box;
}

html, body {
    margin: 0;
    padding: 0;
}

body {
    background: #fff;
    font-size: 16px;
    line-height: 1.6rem;
}

h1, h2, h3, h4, h5, h6 {
    font-weight: normal;
}

h1 {
    font-size: 1.25rem;
    margin: 0 0 .70rem 0;
}

h2 {
    font-size: 1.25rem;
    margin: 1rem 0 .50rem 0;
}

h3 {
    font-size: 1rem;
    margin: 0 0 10px 0;
}

a {
    text-decoration: none;
}

code, pre {
    background: #f8f8f8;
}

code {
    padding: 0 4px;
}

pre {
    padding: 16px 20px;
    overflow-x: auto;
}

html, body, main {
    min-height: 100vh;
}

main {
    display: flex;
}

#index-column {
    flex: none;
    padding: 30px;
    overflow: hidden;
    min-width: 20%;
    max-width: 25%;
}

#content-column {
    flex: 1;
    padding: 30px 60px;
    border: 0 solid #ddd;
    border-width: 0 0 0 1px;
}

#index {
    list-style: none;
    margin: 0;
    padding: 0;
}

.indexsection:not(:last-child) {
    margin-bottom: 16px;
}

.indexsection ul {
    list-style: none;
    margin: 0;
    padding-left: 0;
}

.objlist {
    font-family: monospace;
}

.objlist ul {
    padding-left: 2rem;
}

.modtitle, .sectiontitle {
    font-weight: bold;
}

.breadcrumblink, .sectionlink {
    color: #000;
}

#content {
    max-width: 1000px;
}

.sectiontitle {
    margin-top: 2rem;
    margin-bottom: 1rem;
    border-bottom: 1px solid #000;
}

.name {
    color: #000;
    font-family: monospace;
    font-weight: bold;
}

.ident {
    color: #900;
}

.assign {
    font-weight: normal;
}

.item {
    margin: 0 0 15px 0;
}

.class {
    margin: 0 0 25px 30px;
}

.ancestors {
    margin: 0 0 10px 0;
}

.inheritance {
    margin: 0 0 5px 30px;
}

.inherited {
    color: #666;
}

.desc h1, .desc h2, .desc h3, .desc h4, .desc h5, .desc h6 {
    font-size: 1.15rem;
    margin: 0.5rem 0;
}

.desc p {
    margin: 10px 0;
}

.funcdef {
    display: flex;
    flex-wrap: wrap;
    padding-left: 4em;
}

.funcinit {
    display: flex;
    margin-left: -4em;
}

.funcname, .funcargs {
    text-align: left;
}

.funcname, .funcret {
    white-space: nowrap;
}

.funcret a {
    font-family: monospace;
    font-weight: bold;
}

.sourcecontainer {
    margin-bottom: 10px;
}

.sourcebutton {
    font-size: .85rem;
    text-transform: uppercase;
    color: #444;
}

.expandicon {
    display: inline-block;
    position: relative;
    border-radius: 25%;
    width: 10px;
    height: 10px;
    background-color: #888;
}

.expandicon::after {
    content: "";
    position: absolute;
    display: block;
    background-color: #fff;
    height: 2px;
    margin-top: -1px;
    top: 50%;
    left: 2px;
    right: 2px;
}

.expandicon::before {
    content: "";
    position: absolute;
    display: block;
    background-color: #fff;
    width: 2px;
    margin-left: -1px;
    top: 2px;
    left: 50%;
    bottom: 2px;
}

.expandicon.active::before {
    display: none;
}

.source {
    margin-bottom: 15px;
}

.source pre {
    max-height: 600px;
    overflow-y: auto;
}

.codehilite {
    background: inherit;
}

.hidden {
    display: none;
}

/* Widescreen */
@media all and (min-width: 1400px) {
    #index-column {
        min-width: 10%;
        max-width: 25%;
    }
}

/* Touch screen */
@media all and (max-width: 900px) {
    #index-column {
        max-width: 20%;
    }
}

/* Mobile screen */
@media all and (max-width: 750px) {
    main {
        flex-direction: column;
    }

    #index-column {
        max-width: none;
    }

    #content-column {
        padding: 30px;
        border-width: 1px 0 0 0;
    }
}

    </style>

    <style type="text/css">
        @media print {
    * {
        background: transparent !important;
        color: #000 !important; /* Black prints faster */
        box-shadow: none !important;
        text-shadow: none !important;
    }

    html, body, main {
        min-height: auto;
    }

    main {
        display: block;
    }

    #index-column {
        display: none;
    }

    #content-column {
        border: 0;
        padding: 0;
    }

    .sourcebutton {
        display: none;
    }

    a, a:visited {
        text-decoration: underline;
    }

    pre, blockquote {
        border: 1px solid #999;
    }

    thead {
        display: table-header-group;
    }

    tr, img {
        page-break-inside: avoid;
    }

    img {
        max-width: 100% !important;
    }
}

    </style>
</head>
<body>
    <main>
        
    
        <div id="index-column">
            <ul id="index">

                <li class="indexsection">
                    <h1><a href="#header-functions" class="sectionlink">Functions</a></h1>
                    
    <ul class="objlist">
        <li><a href="#aiopipe.aiopipe" title="aiopipe.aiopipe">aiopipe</a></lI>
    </ul>

                </li>

            
        <li class="indexsection">
            <h1><a href="#header-classes" class="sectionlink">Classes</a></h1>
            <ul class="objlist">
                <li>
                    <a href="#aiopipe.AioPipeGuard" title="aiopipe.AioPipeGuard">AioPipeGuard</a>
                    
                </li>
                <li>
                    <a href="#aiopipe.AioPipeReader" title="aiopipe.AioPipeReader">AioPipeReader</a>
                    
                        
    <ul class="objlist">
        <li><a href="#aiopipe.AioPipeReader.detach" title="aiopipe.AioPipeReader.detach">detach</a></lI>
        <li><a href="#aiopipe.AioPipeReader.open" title="aiopipe.AioPipeReader.open">open</a></lI>
    </ul>

                </li>
                <li>
                    <a href="#aiopipe.AioPipeWriter" title="aiopipe.AioPipeWriter">AioPipeWriter</a>
                    
                        
    <ul class="objlist">
        <li><a href="#aiopipe.AioPipeWriter.detach" title="aiopipe.AioPipeWriter.detach">detach</a></lI>
        <li><a href="#aiopipe.AioPipeWriter.open" title="aiopipe.AioPipeWriter.open">open</a></lI>
    </ul>

                </li>
                <li>
                    <a href="#aiopipe.AioProcGuard" title="aiopipe.AioProcGuard">AioProcGuard</a>
                    
                </li>
            </ul>
        </li>

            


            </ul>
        </div>

        <div id="content-column">
            <div id="content">
                
    

    <header id="section-intro">
        <h1 class="modtitle">
            Module <span class="name"><a class="breadcrumblink" href="">aiopipe</a></span>
        </h1>
        
    
    
    
        
        <div class="desc"><p>This package wraps the <a href="https://docs.python.org/3/library/os.html#os.pipe"><code>os.pipe</code></a>
simplex communication pipe so it can be used as part of the non-blocking
<a href="https://docs.python.org/3/library/asyncio.html"><code>asyncio</code></a> event loop.</p>
<h4 id="example">Example</h4>
<p>The following example opens a pipe with the write end in the child process and the read
end in the parent process:</p>
<pre class="codehilite"><code class="language-python3">&gt;&gt;&gt; from multiprocessing import Process
&gt;&gt;&gt; import asyncio
&gt;&gt;&gt;
&gt;&gt;&gt; from aiopipe import aiopipe
&gt;&gt;&gt;
&gt;&gt;&gt; async def maintask():
...     rx, tx = aiopipe()
...
...     with tx.detach() as tx:
...         proc = Process(target=childproc, args=(tx,))
...         proc.start()
...
...     # The write end is now available in the child process
...     # and detached from the parent process.
...
...     async with rx.open() as rx:
...         msg = await rx.readline()
...
...     proc.join()
...     return msg
&gt;&gt;&gt;
&gt;&gt;&gt; def childproc(tx):
...     asyncio.new_event_loop().run_until_complete(childtask(tx))
&gt;&gt;&gt;
&gt;&gt;&gt; async def childtask(tx):
...     async with tx.open() as tx:
...         tx.write(b&quot;hi from the child process\n&quot;)
&gt;&gt;&gt;
&gt;&gt;&gt; asyncio.new_event_loop().run_until_complete(maintask())
b'hi from the child process\n'
&gt;&gt;&gt;</code></pre></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>"""
This package wraps the [`os.pipe`](https://docs.python.org/3/library/os.html#os.pipe)
simplex communication pipe so it can be used as part of the non-blocking
[`asyncio`](https://docs.python.org/3/library/asyncio.html) event loop.

#### Example

The following example opens a pipe with the write end in the child process and the read
end in the parent process:

```python3
>>> from multiprocessing import Process
>>> import asyncio
>>>
>>> from aiopipe import aiopipe
>>>
>>> async def maintask():
...     rx, tx = aiopipe()
...
...     with tx.detach() as tx:
...         proc = Process(target=childproc, args=(tx,))
...         proc.start()
...
...     # The write end is now available in the child process
...     # and detached from the parent process.
...
...     async with rx.open() as rx:
...         msg = await rx.readline()
...
...     proc.join()
...     return msg
>>>
>>> def childproc(tx):
...     asyncio.new_event_loop().run_until_complete(childtask(tx))
>>>
>>> async def childtask(tx):
...     async with tx.open() as tx:
...         tx.write(b"hi from the child process\\n")
>>>
>>> asyncio.new_event_loop().run_until_complete(maintask())
b'hi from the child process\\n'
>>>
```
"""

from asyncio import StreamReader, StreamWriter, StreamReaderProtocol
import asyncio
import os

__pdoc__ = {}

def aiopipe():
    """
    Create a new multiprocess communication pipe, returning `(rx, tx)`, where `rx` is an
    instance of `AioPipeReader` and `tx` is an instance of `AioPipeWriter`.
    """

    rx, tx = os.pipe()
    return AioPipeReader(rx), AioPipeWriter(tx)

class AioProcGuard:
    """
    Created by `AioPipeReader` / `AioPipeWriter` for sending one end of a pipe to a child
    process.
    """

    __pdoc__["AioProcGuard.__init__"] = None

    def __init__(self, stream):
        self._stream = stream

    def __enter__(self):
        os.set_inheritable(self._stream._fd, True)
        return self._stream

    def __exit__(self, exType, exVal, trace):
        os.close(self._stream._fd)

class AioPipeGuard:
    """
    Created by `AioPipeReader` / `AioPipeWriter` for ensuring the associated pipe end is
    closed after the context is exited.
    """

    __pdoc__["AioPipeGuard.__init__"] = None

    def __init__(self, stream):
        self._stream = stream

    async def __aenter__(self):
        return await self._stream._open()

    async def __aexit__(self, *args):
        try:
            os.close(self._stream._fd)
        except OSError:
            # The transport/protocol sometimes closes the fd before this is reached.
            pass

class _AioPipeStream:
    def __init__(self, fd):
        self._fd = fd

    def open(self):
        return AioPipeGuard(self)

    async def _open(self):
        raise NotImplementedError()

    def detach(self) -> AioProcGuard:
        """
        Detach this end of the pipe from the current process in preparation for use in a
        child process.

        This returns an instance of `AioProcGuard`, which must be used as part of a `with`
        context. When the context is entered, the stream is prepared for inheritance by
        the child process and returned as the context variable. When the context is exited,
        the stream is closed in the parent process.
        """

        return AioProcGuard(self)

class AioPipeReader(_AioPipeStream):
    """
    The read end of a pipe.
    """

    __pdoc__["AioPipeReader.__init__"] = None

    __pdoc__["AioPipeReader.open"] = """
        Open the receive end on the current event loop, returning an instance of
        `AioPipeGuard`.

        This object must be used as part of a `with` context. When the context is entered,
        the receive end is opened and an instance of [`asyncio.StreamReader`][stdlib] is
        returned as the context variable. When the context is exited, the receive end is
        closed.

        [stdlib]: https://docs.python.org/3/library/asyncio-stream.html#streamreader
    """

    async def _open(self):
        rx = StreamReader()
        _, _ = await asyncio.get_event_loop().connect_read_pipe(
            lambda: StreamReaderProtocol(rx),
            os.fdopen(self._fd))

        return rx

class AioPipeWriter(_AioPipeStream):
    """
    The write end of a pipe.
    """

    __pdoc__["AioPipeWriter.__init__"] = None

    __pdoc__["AioPipeWriter.open"] = """
        Open the transmit end on the current event loop, returning an instance of
        `AioPipeGuard`.

        This object must be used as part of a `with` context. When the context is entered,
        the transmit end is opened and an instance of [`asyncio.StreamWriter`][stdlib] is
        returned as the context variable. When the context is exited, the transmit end is
        closed.

        [stdlib]: https://docs.python.org/3/library/asyncio-stream.html#streamwriter
    """

    async def _open(self):
        rx = StreamReader()
        transport, proto = await asyncio.get_event_loop().connect_write_pipe(
            lambda: StreamReaderProtocol(rx),
            os.fdopen(self._fd, "w"))
        tx = StreamWriter(transport, proto, rx, None)

        return tx
</code></pre>
        </div>
    </div>



    </header>

    <section id="section-items">

            <h2 class="sectiontitle" id="header-functions">Functions</h2>
                
    
    
    <div class="item">
        <a href="#aiopipe.aiopipe" class="name" id="aiopipe.aiopipe">
            <div class="funcdef">
                <div class="funcinit">
                    <div class="funcname">
                        <span class="type">def</span>
                        <span class="ident">aiopipe</span>(
                    </div>
                    <div class="funcargs">)</div>
                </div>
            </div>
        </a>
        
        
    
    
    
        
        <div class="desc"><p>Create a new multiprocess communication pipe, returning <code>(rx, tx)</code>, where <code>rx</code> is an
instance of <a href="#aiopipe.AioPipeReader"><code>AioPipeReader</code></a> and <code>tx</code> is an instance of <a href="#aiopipe.AioPipeWriter"><code>AioPipeWriter</code></a>.</p></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>def aiopipe():
    """
    Create a new multiprocess communication pipe, returning `(rx, tx)`, where `rx` is an
    instance of `AioPipeReader` and `tx` is an instance of `AioPipeWriter`.
    """

    rx, tx = os.pipe()
    return AioPipeReader(rx), AioPipeWriter(tx)
</code></pre>
        </div>
    </div>



    
    </div>



            <h2 class="sectiontitle" id="header-classes">Classes</h2>
                
    
    <div class="item">
        
    
    <a href="#aiopipe.AioPipeGuard" id="aiopipe.AioPipeGuard" class="name">
        
        <span class="type">class</span> <span class="ident">AioPipeGuard</span>
    
    </a>


        
    
    
    
        
        <div class="desc"><p>Created by <a href="#aiopipe.AioPipeReader"><code>AioPipeReader</code></a> / <a href="#aiopipe.AioPipeWriter"><code>AioPipeWriter</code></a> for ensuring the associated pipe end is
closed after the context is exited.</p></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>class AioPipeGuard:
    """
    Created by `AioPipeReader` / `AioPipeWriter` for ensuring the associated pipe end is
    closed after the context is exited.
    """

    __pdoc__["AioPipeGuard.__init__"] = None

    def __init__(self, stream):
        self._stream = stream

    async def __aenter__(self):
        return await self._stream._open()

    async def __aexit__(self, *args):
        try:
            os.close(self._stream._fd)
        except OSError:
            # The transport/protocol sometimes closes the fd before this is reached.
            pass
</code></pre>
        </div>
    </div>




        <div class="class">
            <h3 title="Listed in Method Resolution Order">Ancestors</h3>
            <ul class="ancestors">
                <li>builtins.object</li>
            </ul>
        </div>
    </div>

                
    
    <div class="item">
        
    
    <a href="#aiopipe.AioPipeReader" id="aiopipe.AioPipeReader" class="name">
        
        <span class="type">class</span> <span class="ident">AioPipeReader</span>
    
    </a>


        
    
    
    
        
        <div class="desc"><p>The read end of a pipe.</p></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>class AioPipeReader(_AioPipeStream):
    """
    The read end of a pipe.
    """

    __pdoc__["AioPipeReader.__init__"] = None

    __pdoc__["AioPipeReader.open"] = """
        Open the receive end on the current event loop, returning an instance of
        `AioPipeGuard`.

        This object must be used as part of a `with` context. When the context is entered,
        the receive end is opened and an instance of [`asyncio.StreamReader`][stdlib] is
        returned as the context variable. When the context is exited, the receive end is
        closed.

        [stdlib]: https://docs.python.org/3/library/asyncio-stream.html#streamreader
    """

    async def _open(self):
        rx = StreamReader()
        _, _ = await asyncio.get_event_loop().connect_read_pipe(
            lambda: StreamReaderProtocol(rx),
            os.fdopen(self._fd))

        return rx
</code></pre>
        </div>
    </div>




        <div class="class">
            <h3 title="Listed in Method Resolution Order">Ancestors</h3>
            <ul class="ancestors">
                <li>builtins.object</li>
            </ul>
                <h3>Methods</h3>
                    
    
    
    <div class="item">
        <a href="#aiopipe.AioPipeReader.detach" class="name" id="aiopipe.AioPipeReader.detach">
            <div class="funcdef">
                <div class="funcinit">
                    <div class="funcname">
                        <span class="type">def</span>
                        <span class="ident">detach</span>(
                    </div>
                    <div class="funcargs">self)</div>
                </div>
                
                <div class="funcret">
                    &nbsp;-&gt; <a href="#aiopipe.AioProcGuard" title="aiopipe.AioProcGuard">AioProcGuard</a>
                </div>
            </div>
        </a>
        
        

        
    
        
    
    
        
        <div class="desc"><p>Detach this end of the pipe from the current process in preparation for use in a
child process.</p>
<p>This returns an instance of <a href="#aiopipe.AioProcGuard"><code>AioProcGuard</code></a>, which must be used as part of a <code>with</code>
context. When the context is entered, the stream is prepared for inheritance by
the child process and returned as the context variable. When the context is exited,
the stream is closed in the parent process.</p></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>def detach(self) -> AioProcGuard:
    """
    Detach this end of the pipe from the current process in preparation for use in a
    child process.
    This returns an instance of `AioProcGuard`, which must be used as part of a `with`
    context. When the context is entered, the stream is prepared for inheritance by
    the child process and returned as the context variable. When the context is exited,
    the stream is closed in the parent process.
    """
    return AioProcGuard(self)
</code></pre>
        </div>
    </div>



    
    </div>


                    
    
    
    <div class="item">
        <a href="#aiopipe.AioPipeReader.open" class="name" id="aiopipe.AioPipeReader.open">
            <div class="funcdef">
                <div class="funcinit">
                    <div class="funcname">
                        <span class="type">def</span>
                        <span class="ident">open</span>(
                    </div>
                    <div class="funcargs">self)</div>
                </div>
            </div>
        </a>
        
        

        
    
        
    
    
        
        <div class="desc"><p>Open the receive end on the current event loop, returning an instance of
<a href="#aiopipe.AioPipeGuard"><code>AioPipeGuard</code></a>.</p>
<p>This object must be used as part of a <code>with</code> context. When the context is entered,
the receive end is opened and an instance of <a href="https://docs.python.org/3/library/asyncio-stream.html#streamreader"><code>asyncio.StreamReader</code></a> is
returned as the context variable. When the context is exited, the receive end is
closed.</p></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>def open(self):
    return AioPipeGuard(self)
</code></pre>
        </div>
    </div>



    
    </div>


        </div>
    </div>

                
    
    <div class="item">
        
    
    <a href="#aiopipe.AioPipeWriter" id="aiopipe.AioPipeWriter" class="name">
        
        <span class="type">class</span> <span class="ident">AioPipeWriter</span>
    
    </a>


        
    
    
    
        
        <div class="desc"><p>The write end of a pipe.</p></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>class AioPipeWriter(_AioPipeStream):
    """
    The write end of a pipe.
    """

    __pdoc__["AioPipeWriter.__init__"] = None

    __pdoc__["AioPipeWriter.open"] = """
        Open the transmit end on the current event loop, returning an instance of
        `AioPipeGuard`.

        This object must be used as part of a `with` context. When the context is entered,
        the transmit end is opened and an instance of [`asyncio.StreamWriter`][stdlib] is
        returned as the context variable. When the context is exited, the transmit end is
        closed.

        [stdlib]: https://docs.python.org/3/library/asyncio-stream.html#streamwriter
    """

    async def _open(self):
        rx = StreamReader()
        transport, proto = await asyncio.get_event_loop().connect_write_pipe(
            lambda: StreamReaderProtocol(rx),
            os.fdopen(self._fd, "w"))
        tx = StreamWriter(transport, proto, rx, None)

        return tx
</code></pre>
        </div>
    </div>




        <div class="class">
            <h3 title="Listed in Method Resolution Order">Ancestors</h3>
            <ul class="ancestors">
                <li>builtins.object</li>
            </ul>
                <h3>Methods</h3>
                    
    
    
    <div class="item">
        <a href="#aiopipe.AioPipeWriter.detach" class="name" id="aiopipe.AioPipeWriter.detach">
            <div class="funcdef">
                <div class="funcinit">
                    <div class="funcname">
                        <span class="type">def</span>
                        <span class="ident">detach</span>(
                    </div>
                    <div class="funcargs">self)</div>
                </div>
                
                <div class="funcret">
                    &nbsp;-&gt; <a href="#aiopipe.AioProcGuard" title="aiopipe.AioProcGuard">AioProcGuard</a>
                </div>
            </div>
        </a>
        
        

        
    
        
    
    
        
        <div class="desc"><p>Detach this end of the pipe from the current process in preparation for use in a
child process.</p>
<p>This returns an instance of <a href="#aiopipe.AioProcGuard"><code>AioProcGuard</code></a>, which must be used as part of a <code>with</code>
context. When the context is entered, the stream is prepared for inheritance by
the child process and returned as the context variable. When the context is exited,
the stream is closed in the parent process.</p></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>def detach(self) -> AioProcGuard:
    """
    Detach this end of the pipe from the current process in preparation for use in a
    child process.
    This returns an instance of `AioProcGuard`, which must be used as part of a `with`
    context. When the context is entered, the stream is prepared for inheritance by
    the child process and returned as the context variable. When the context is exited,
    the stream is closed in the parent process.
    """
    return AioProcGuard(self)
</code></pre>
        </div>
    </div>



    
    </div>


                    
    
    
    <div class="item">
        <a href="#aiopipe.AioPipeWriter.open" class="name" id="aiopipe.AioPipeWriter.open">
            <div class="funcdef">
                <div class="funcinit">
                    <div class="funcname">
                        <span class="type">def</span>
                        <span class="ident">open</span>(
                    </div>
                    <div class="funcargs">self)</div>
                </div>
            </div>
        </a>
        
        

        
    
        
    
    
        
        <div class="desc"><p>Open the transmit end on the current event loop, returning an instance of
<a href="#aiopipe.AioPipeGuard"><code>AioPipeGuard</code></a>.</p>
<p>This object must be used as part of a <code>with</code> context. When the context is entered,
the transmit end is opened and an instance of <a href="https://docs.python.org/3/library/asyncio-stream.html#streamwriter"><code>asyncio.StreamWriter</code></a> is
returned as the context variable. When the context is exited, the transmit end is
closed.</p></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>def open(self):
    return AioPipeGuard(self)
</code></pre>
        </div>
    </div>



    
    </div>


        </div>
    </div>

                
    
    <div class="item">
        
    
    <a href="#aiopipe.AioProcGuard" id="aiopipe.AioProcGuard" class="name">
        
        <span class="type">class</span> <span class="ident">AioProcGuard</span>
    
    </a>


        
    
    
    
        
        <div class="desc"><p>Created by <a href="#aiopipe.AioPipeReader"><code>AioPipeReader</code></a> / <a href="#aiopipe.AioPipeWriter"><code>AioPipeWriter</code></a> for sending one end of a pipe to a child
process.</p></div>
    


    
    
    <div class="sourcecontainer">
        <a href="#" class="sourcebutton">
            Source <span class="expandicon"></span>
        </a>
        <div class="source hidden">
            <pre><code>class AioProcGuard:
    """
    Created by `AioPipeReader` / `AioPipeWriter` for sending one end of a pipe to a child
    process.
    """

    __pdoc__["AioProcGuard.__init__"] = None

    def __init__(self, stream):
        self._stream = stream

    def __enter__(self):
        os.set_inheritable(self._stream._fd, True)
        return self._stream

    def __exit__(self, exType, exVal, trace):
        os.close(self._stream._fd)
</code></pre>
        </div>
    </div>




        <div class="class">
            <h3 title="Listed in Method Resolution Order">Ancestors</h3>
            <ul class="ancestors">
                <li>builtins.object</li>
            </ul>
        </div>
    </div>



    </section>

            </div>
        </div>
    </main>

    <script defer>
        Array.from(document.getElementsByClassName("sourcecontainer")).forEach(function(el) {
    var button = el.getElementsByClassName("sourcebutton")[0];
    var icon = el.getElementsByClassName("expandicon")[0];
    var source = el.getElementsByClassName("source")[0];

    button.addEventListener("click", function(e) {
        e.preventDefault();
        source.classList.toggle("hidden");
        icon.classList.toggle("active");
    });
});

    </script>

</body>
</html>
